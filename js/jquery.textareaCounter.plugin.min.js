!function(a){a.fn.textareaCount=function(b,c){function d(){return o.html(e()),"undefined"!=typeof c&&c.call(this,g()),!0}function e(){var a=n.val(),c=a.length;if(b.maxCharacterSize>0){c>=b.maxCharacterSize&&(a=a.substring(0,b.maxCharacterSize));var d=j(a),e=b.maxCharacterSize-d;if(i()||(e=b.maxCharacterSize),c>e){var g=this.scrollTop;n.val(a.substring(0,e)),this.scrollTop=g}o.removeClass(b.warningStyle),e-c<=b.warningNumber&&o.addClass(b.warningStyle),p=n.val().length+d,i()||(p=n.val().length),s=l(k(n.val())),r=q-p}else{var d=j(a);p=n.val().length+d,i()||(p=n.val().length),s=l(k(n.val()))}return f()}function f(){var a=b.displayFormat;return a=a.replace("#input",p),a=a.replace("#words",s),q>0&&(a=a.replace("#max",q),a=a.replace("#left",r)),a}function g(){var a={input:p,max:q,left:r,words:s};return a}function h(a){return a.next(".charleft")}function i(){var a=navigator.appVersion;return-1!=a.toLowerCase().indexOf("win")}function j(a){for(var b=0,c=0;c<a.length;c++)"\n"==a.charAt(c)&&b++;return b}function k(a){var b=a+" ",c=/^[^A-Za-z0-9]+/gi,d=b.replace(c,""),e=rExp=/[^A-Za-z0-9]+/gi,f=d.replace(e," "),g=f.split(" ");return g}function l(a){var b=a.length-1;return b}var m={maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",warningNumber:20,displayFormat:"#input characters | #words words"},b=a.extend(m,b),n=a(this);a("<div class='charleft'>&nbsp;</div>").insertAfter(n);var o=({width:n.width()},h(n));o.addClass(b.originalStyle);var p=0,q=b.maxCharacterSize,r=0,s=0;n.bind("keyup",function(a){d()}).bind("mouseover",function(a){setTimeout(function(){d()},10)}).bind("paste",function(a){setTimeout(function(){d()},10)}),d()}}(jQuery);